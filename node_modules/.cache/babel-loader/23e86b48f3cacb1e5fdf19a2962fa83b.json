{"ast":null,"code":"var _jsxFileName = \"/Users/naomikenyatta/abstracts-vis/src/components/histogram.js\";\nimport { useD3 } from '../hooks/useD3';\nimport React from 'react';\nimport * as d3 from 'd3';\n\nfunction Histogram(_ref) {\n  var data = _ref.data,\n      nBin = _ref.nBin;\n  console.log(nBin);\n  var margin = {\n    top: 10,\n    right: 10,\n    bottom: 10,\n    left: 10\n  },\n      width = 500 - margin.left - margin.right,\n      height = 300 - margin.top - margin.bottom;\n  var ref = useD3(function (svg) {\n    // X axis: scale and draw:\n    var x = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n      return +d.frequency;\n    }) + 10]).range([30, width]);\n    svg.append(\"g\").attr(\"transform\", \"translate(0,\" + (height + 10) + \")\").call(d3.axisBottom(x)); // Y axis: initialization\n\n    var y = d3.scaleLinear() //.domain([0, d3.max(data, function(d) { return d.length; })])\n    .range([height, 0]);\n    var yAxis = svg.append(\"g\").attr(\"transform\", \"translate(30, 10)\");\n    console.log(nBin); // set the parameters for the histogram\n\n    var histogram = d3.histogram().value(function (d) {\n      return d.frequency;\n    }) // I need to give the vector of value\n    .domain(x.domain()) // then the domain of the graphic\n    .thresholds(x.ticks(nBin)); // then the numbers of bins\n    // And apply this function to data to get the bins\n\n    var bins = histogram(data); // Y axis: update now that we know the domain\n\n    y.domain([0, d3.max(bins, function (d) {\n      return d.length;\n    })]); // d3.hist has to be called before the Y axis obviously\n\n    yAxis.transition().duration(1000).call(d3.axisLeft(y)); // Join the rect with the bins data\n\n    var u = svg.selectAll(\"rect\").data(bins); // Manage the existing bars and eventually the new ones:\n\n    u.exit().remove().enter().append(\"rect\") // Add a new rect for each new elements\n    .merge(u) // get the already existing elements as well\n    .transition() // and apply changes to all of them\n    .duration(1000).attr(\"x\", 1).attr(\"transform\", function (d) {\n      return \"translate(\" + x(d.x0) + \",\" + (y(d.length) + 10) + \")\";\n    }).attr(\"width\", function (d) {\n      return x(d.x1) - x(d.x0) - 4;\n    }).attr(\"height\", function (d) {\n      return height - y(d.length);\n    }).style(\"stroke\", \"#dcd0ff\").style(\"stroke-width\", \"3px\").style(\"fill\", \"#dcd0ff\");\n  });\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    ref: ref,\n    style: {\n      height: 350,\n      width: 500,\n      transform: \"rotate(90deg)\",\n      transformOrigin: 150\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  });\n}\n\nexport default Histogram;","map":{"version":3,"sources":["/Users/naomikenyatta/abstracts-vis/src/components/histogram.js"],"names":["useD3","React","d3","Histogram","data","nBin","console","log","margin","top","right","bottom","left","width","height","ref","svg","x","scaleLinear","domain","max","d","frequency","range","append","attr","call","axisBottom","y","yAxis","histogram","value","thresholds","ticks","bins","length","transition","duration","axisLeft","u","selectAll","exit","remove","enter","merge","x0","x1","style","transform","transformOrigin"],"mappings":"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","sourcesContent":["import { useD3 } from '../hooks/useD3';\nimport React from 'react';\nimport * as d3 from 'd3';\n\nfunction Histogram({ data, nBin}) {\n  console.log(nBin)\n  var margin = {top: 10, right: 10, bottom: 10, left: 10},\n    width = 500 - margin.left - margin.right,\n    height = 300 - margin.top - margin.bottom;\n\n  const ref = useD3(\n    (svg) => {\n      // X axis: scale and draw:\n      var x = d3.scaleLinear()\n        .domain([0, d3.max(data, function(d) { return +d.frequency }) + 10])\n        .range([30, width]);\n      svg.append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + (height+10) + \")\")\n        .call(d3.axisBottom(x));\n\n      // Y axis: initialization\n      var y = d3.scaleLinear()\n        //.domain([0, d3.max(data, function(d) { return d.length; })])\n        .range([height, 0]);\n      var yAxis = svg.append(\"g\")\n         .attr(\"transform\", \"translate(30, 10)\")\n\n        console.log(nBin);\n\n        // set the parameters for the histogram\n        var histogram = d3.histogram()\n          .value(function(d) { return d.frequency; })   // I need to give the vector of value\n          .domain(x.domain())  // then the domain of the graphic\n          .thresholds(x.ticks(nBin)); // then the numbers of bins\n\n        // And apply this function to data to get the bins\n        var bins = histogram(data);\n\n        // Y axis: update now that we know the domain\n        y.domain([0, d3.max(bins, function(d) { return d.length; })]);   // d3.hist has to be called before the Y axis obviously\n        yAxis\n          .transition()\n          .duration(1000)\n          .call(d3.axisLeft(y));\n\n        // Join the rect with the bins data\n        var u = svg.selectAll(\"rect\")\n          .data(bins)\n\n        // Manage the existing bars and eventually the new ones:\n        u\n          .exit()\n          .remove()\n          .enter()\n          .append(\"rect\") // Add a new rect for each new elements\n          .merge(u) // get the already existing elements as well\n          .transition() // and apply changes to all of them\n          .duration(1000)\n          .attr(\"x\", 1)\n          .attr(\"transform\", function(d) { return \"translate(\" + x(d.x0) + \",\" + (y(d.length)+10) + \")\"; })\n          .attr(\"width\", function(d) { return x(d.x1) - x(d.x0) - 4 ; })\n          .attr(\"height\", function(d) { return height - y(d.length); })\n          .style(\"stroke\", \"#dcd0ff\")\n          .style(\"stroke-width\", \"3px\")\n          .style(\"fill\", \"#dcd0ff\")\n\n\n\n    });\n\n  return (\n    <svg\n      ref={ref}\n      style={{\n        height: 350,\n        width: 500,\n        transform: \"rotate(90deg)\",\n        transformOrigin: 150\n      }}\n    />\n  );\n}\n\nexport default Histogram;\n"]},"metadata":{},"sourceType":"module"}