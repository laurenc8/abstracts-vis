{"ast":null,"code":"var _jsxFileName = \"/Users/laurenc82/Downloads/CS 271/abstracts-vis/src/components/histogram.js\";\nimport { useD3 } from '../hooks/useD3';\nimport React from 'react';\nimport * as d3 from 'd3';\n\nfunction Histogram(_ref) {\n  var data = _ref.data;\n  var margin = {\n    top: 10,\n    right: 10,\n    bottom: 10,\n    left: 10\n  },\n      width = 500 - margin.left - margin.right,\n      height = 300 - margin.top - margin.bottom;\n  var ref = useD3(function (svg) {\n    // X axis: scale and draw:\n    var x = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n      return +d.price;\n    }) + 10]).range([30, width]);\n    svg.append(\"g\").attr(\"transform\", \"translate(0,\" + height + \")\").call(d3.axisBottom(x)); // Y axis: initialization\n\n    var y = d3.scaleLinear().range([height, 0]);\n    var yAxis = svg.append(\"g\").attr(\"transform\", \"translate(\" + 40 + \",0)\"); // A function that builds the graph for a specific value of bin\n\n    function update(nBin) {\n      // set the parameters for the histogram\n      var histogram = d3.histogram().value(function (d) {\n        return d.price;\n      }) // I need to give the vector of value\n      .domain(x.domain()) // then the domain of the graphic\n      .thresholds(x.ticks(nBin)); // then the numbers of bins\n      // And apply this function to data to get the bins\n\n      var bins = histogram(data); // Y axis: update now that we know the domain\n\n      y.domain([0, d3.max(bins, function (d) {\n        return d.length;\n      })]); // d3.hist has to be called before the Y axis obviously\n\n      yAxis.transition().duration(1000).call(d3.axisLeft(y)); // Join the rect with the bins data\n\n      var u = svg.selectAll(\"rect\").data(bins); // Manage the existing bars and eventually the new ones:\n\n      u.enter().append(\"rect\") // Add a new rect for each new elements\n      .merge(u) // get the already existing elements as well\n      .transition() // and apply changes to all of them\n      .duration(1000).attr(\"x\", 1).attr(\"transform\", function (d) {\n        return \"translate(\" + x(d.x0) + \",\" + y(d.length) + \")\";\n      }).attr(\"width\", function (d) {\n        return x(d.x1) - x(d.x0) - 4;\n      }).attr(\"height\", function (d) {\n        return height - y(d.length);\n      }).style(\"stroke\", \"#69b3a2\").style(\"stroke-width\", \"3px\").style(\"fill\", \"none\"); // If less bar in the new histogram, I delete the ones not in use anymore\n\n      u.exit().remove();\n    } // Initialize with 20 bins\n\n\n    update(20); // Listen to the button -> update if user change it\n\n    d3.select(\"#nBin\").on(\"input\", function () {\n      update(+this.value);\n    });\n  });\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    ref: ref,\n    style: {\n      height: 350,\n      width: 500,\n      transform: \"rotate(90deg)\",\n      transformOrigin: 150\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  });\n}\n\nexport default Histogram;","map":{"version":3,"sources":["/Users/laurenc82/Downloads/CS 271/abstracts-vis/src/components/histogram.js"],"names":["useD3","React","d3","Histogram","data","margin","top","right","bottom","left","width","height","ref","svg","x","scaleLinear","domain","max","d","price","range","append","attr","call","axisBottom","y","yAxis","update","nBin","histogram","value","thresholds","ticks","bins","length","transition","duration","axisLeft","u","selectAll","enter","merge","x0","x1","style","exit","remove","select","on","transform","transformOrigin"],"mappings":"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","sourcesContent":["import { useD3 } from '../hooks/useD3';\nimport React from 'react';\nimport * as d3 from 'd3';\n\nfunction Histogram({ data }) {\n  var margin = {top: 10, right: 10, bottom: 10, left: 10},\n    width = 500 - margin.left - margin.right,\n    height = 300 - margin.top - margin.bottom;\n\n  const ref = useD3(\n    (svg) => {\n      // X axis: scale and draw:\n      var x = d3.scaleLinear()\n        .domain([0, d3.max(data, function(d) { return +d.price }) + 10])\n        .range([30, width]);\n      svg.append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\n        .call(d3.axisBottom(x));\n\n      // Y axis: initialization\n      var y = d3.scaleLinear()\n        .range([height, 0]);\n      var yAxis = svg.append(\"g\")\n        .attr(\"transform\", \"translate(\" + 40 + \",0)\")\n\n      // A function that builds the graph for a specific value of bin\n      function update(nBin) {\n\n      // set the parameters for the histogram\n      var histogram = d3.histogram()\n          .value(function(d) { return d.price; })   // I need to give the vector of value\n          .domain(x.domain())  // then the domain of the graphic\n          .thresholds(x.ticks(nBin)); // then the numbers of bins\n\n      // And apply this function to data to get the bins\n      var bins = histogram(data);\n\n      // Y axis: update now that we know the domain\n      y.domain([0, d3.max(bins, function(d) { return d.length; })]);   // d3.hist has to be called before the Y axis obviously\n      yAxis\n          .transition()\n          .duration(1000)\n          .call(d3.axisLeft(y));\n\n      // Join the rect with the bins data\n      var u = svg.selectAll(\"rect\")\n          .data(bins)\n\n      // Manage the existing bars and eventually the new ones:\n      u\n          .enter()\n          .append(\"rect\") // Add a new rect for each new elements\n          .merge(u) // get the already existing elements as well\n          .transition() // and apply changes to all of them\n          .duration(1000)\n            .attr(\"x\", 1)\n            .attr(\"transform\", function(d) { return \"translate(\" + x(d.x0) + \",\" + y(d.length) + \")\"; })\n            .attr(\"width\", function(d) { return x(d.x1) - x(d.x0) - 4 ; })\n            .attr(\"height\", function(d) { return height - y(d.length); })\n            .style(\"stroke\", \"#69b3a2\")\n            .style(\"stroke-width\", \"3px\")\n            .style(\"fill\", \"none\")\n\n\n      // If less bar in the new histogram, I delete the ones not in use anymore\n      u\n          .exit()\n          .remove()\n\n      }\n\n      // Initialize with 20 bins\n      update(20)\n\n      // Listen to the button -> update if user change it\n      d3.select(\"#nBin\").on(\"input\", function() {\n        update(+this.value);\n      });\n    });\n\n  return (\n    <svg\n      ref={ref}\n      style={{\n        height: 350,\n        width: 500,\n        transform: \"rotate(90deg)\",\n        transformOrigin: 150\n      }}\n    />\n  );\n}\n\nexport default Histogram;"]},"metadata":{},"sourceType":"module"}